{
  "name": "D2R Traderie Tracker Crawler",
  "image": "python:3.13-slim",
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": "false",
      "username": "root",
      "upgradePackages": "true"
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.debugpy",
        "ms-vscode.vscode-json"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": true
      }
    }
  },
  "postCreateCommand": "bash -c 'apt-get update && apt-get install -y unzip wget curl ca-certificates libglib2.0-0 libnss3 libatk1.0-0 libatk-bridge2.0-0 libatspi2.0-0 libgtk-3-0 libpango-1.0-0 libxcomposite1 libxrandr2 libxcursor1 libxdamage1 libxfixes3 libxrender1 libxi6 libxss1 libasound2 libcups2 libdrm2 libgbm1 fonts-dejavu-core fonts-liberation fontconfig && mkdir -p /opt/chrome && wget -O /tmp/chrome.zip https://edgedl.me.gvt1.com/edgedl/chrome/chrome-for-testing/120.0.6099.109/linux64/chrome-linux64.zip && unzip /tmp/chrome.zip -d /tmp/ && mv /tmp/chrome-linux64/* /opt/chrome/ && chmod +x /opt/chrome/chrome && chmod +x /opt/chrome/chrome_sandbox && rm -rf /tmp/chrome* && mkdir -p /opt/chromedriver && wget -O /tmp/chromedriver.zip https://edgedl.me.gvt1.com/edgedl/chrome/chrome-for-testing/120.0.6099.109/linux64/chromedriver-linux64.zip && unzip /tmp/chromedriver.zip -d /tmp/ && mv /tmp/chromedriver-linux64/chromedriver /opt/chromedriver/ && chmod +x /opt/chromedriver/chromedriver && rm -rf /tmp/chromedriver* && pip install -r requirements.txt'",
  "postStartCommand": "bash -c 'sleep 3 && cd /workspaces/D2R-Traderie-Tracker-Crawler && echo \"현재 디렉토리: $(pwd)\" && echo \"파일 목록:\" && ls -la && echo \".devcontainer 폴더 내용:\" && ls -la .devcontainer/ && if [ -f .devcontainer/load-secrets.sh ]; then echo \"load-secrets.sh 발견! 실행 중...\" && chmod +x .devcontainer/load-secrets.sh && bash .devcontainer/load-secrets.sh 2>&1 | tee /tmp/load-secrets.log && echo \"=== 로그 파일 위치: /tmp/load-secrets.log ===\"; else echo \"load-secrets.sh 파일을 찾을 수 없습니다!\" && echo \"현재 디렉토리: $(pwd)\" && echo \"상위 디렉토리:\" && ls -la /workspaces/; fi'",
  "forwardPorts": [5000],
  "remoteUser": "root",
  "containerEnv": {
    "CHROME_BIN": "/opt/chrome/chrome",
    "CHROMEDRIVER": "/opt/chromedriver/chromedriver"
  },
  "remoteEnv": {
    "AWS_ACCESS_KEY_ID": "${localEnv:AWS_ACCESS_KEY_ID}",
    "AWS_SECRET_ACCESS_KEY": "${localEnv:AWS_SECRET_ACCESS_KEY}",
    "TRADERIE_ID": "${localEnv:TRADERIE_ID}",
    "TRADERIE_PWD": "${localEnv:TRADERIE_PWD}"
  }
}
